<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="viewport"
              content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>

        <link rel="stylesheet" type="text/css" href="css/phone.css" />
        <link rel="stylesheet" type="text/css" media="" href="css/base.css" />

        <script src="js/jquery-2.1.1.min.js"></script>
        <script src="js/jquery.crypt.js"></script>
        <script src="js/base.js"></script>

        <title>T.R.O.W. - The Ring of Wonder</title>
    </head>
    <body>
        <div>
            <p>Portal</p>
        </div>
       <table id="topicListContainer"  style="width: 100%">
           <tr id="topPageControl">
               <td id="pageControl"></td>
           </tr>
           <!--Post-->

           <tr>
               <td id="pageControl_bottom"></td>
           </tr>
       </table>
        <div id="toolbar">
            <div class="toolbar_item" style="float:left"><a onclick="history.go(-1);">[Back]</a>&nbsp;</div>
            <div class="toolbar_item" style="float:left"><a onclick="history.go(1);">[Forward]</a>&nbsp;</div>
            <div class="toolbar_item" style="float:right"><a href="index.html">[Portal]</a>&nbsp;</div>
            <div id="user_info_toolbar" class="toolbar_item" style="float:left"><a href="login.html">[Log In]</a></div>
            <div class="toolbar_item" style="float:right"><a href="topicList.html">[Forums]</a>&nbsp;</div>
            <div class="toolbar_item" style="float:right"><a onclick="location.reload();">[Refresh]</a>&nbsp;</div>
        </div>
    <script>
        function touch(obj){
            // use # instead of ? to be compatible with windows phone.
            window.location.href= "topicView.html" + paramSeparator + "tid=" + obj.id.replace("post_", "");
        }
    $(function(){

        getTopics(59,0,function(json){
            var htmlStr="";
            for(var topicIndex in json.data) {
                var topic = json.data[topicIndex];
                var topicDate="";
                htmlStr +="<tr id=\"post_" + topic.id +"\"  onclick=\"touch(this)\"><td><p class=\"title\">" +topic.title + "</p><span class=\"info\" id=\"description\">" + topic.description + "</span></td></tr>"
            }
            $("#topPageControl").after(htmlStr);
            $("#pageControl").hide();
            $("#pageControl_bottom").hide();
        });

    });

    </script>
    </body>
</html>